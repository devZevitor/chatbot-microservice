version: "3.1"

rules:

- rule: Saudacao ao usuario
  steps:
  - intent: saudacao
  - action: utter_saudacao

- rule: Agradecimento ao usuario
  steps:
  - intent: agradecimento
  - action: utter_agradecimento

- rule: Despedida ao usuario
  steps:
  - intent: despedida
  - action: utter_despedida

- rule: Iniciar agendamento
  steps:
    - intent: agendamento_servico
    - action: agendamento_form
    - active_loop: agendamento_form

- rule: Encerrar agendamento
  condition:
    - active_loop: agendamento_form
    - slot_was_set:
      - data
      - horario
      - tem_preferencia_profissional
      - profissional
  steps:
    - action: agendamento_form
    - active_loop: null
    - action: utter_submit

- rule: Reformular a ultima frase
  steps:
  - intent: nlu_fallback
  - action: utter_reformular

# - rule: Listar profissionais se não houver preferência
#   condition:
#     - active_loop: agendamento_form
#   steps:
#     - slot_was_set:
#         - tem_preferencia_profissional: false
#     - action: action_listar_profissionais
